function JumpstartCall(endPoint,containerId,htmlConstruct) {
  if (!containerId) var containerId = null;
  if (!htmlConstruct) var htmlConstruct = 'ul';
  var theCall = this;
  var callAuth = new AuthHandler();
  this.init = function() {
    $.ajax({
      url: endPoint,
      dataType: 'json',
      success: function(data) {
        theCall.processCall(data);
      }
    });
  }
  this.processCall = function(data) {
    if (containerId == null) {
      return data;
    } else {
      theCall.setConstruct();
      var outputHTML = this.iterateData(data);
      $('#'+containerId).html(outputHTML);
    }
  }
  this.iterateData = function(loopData) {
    var tempText = theCall.htmlStructure[0];
    for (var key in loopData) {
      var val = loopData[key];
      tempText += theCall.htmlStructure[2]+key+theCall.htmlStructure[4];
      if ((typeof(val)=='object') && val != null) {
        tempText += this.iterateData(val);
      } else {
        tempText += val;
      }
      tempText += theCall.htmlStructure[3];
    }
    tempText += theCall.htmlStructure[1];
    return tempText;
  }
  this.setConstruct = function() {
    var constructKey = '<'+htmlConstruct+'>';
    var constructMap = new Array();
    constructMap.push(new Array('<ul>','</ul>','<li>','</li>',' : '));
    constructMap.push(new Array('<ol>','</ol>','<li>','</li>',' : '));
    constructMap.push(new Array('<div>','</div>','<div>','</div>',''));
    constructMap.push(new Array('<dl>','</dl>','<dt>','</dd>','</dt><dd>'));
    for (var key in constructMap) {
      var thisMap = constructMap[key];
      if (thisMap[0] == constructKey) {
        theCall.htmlStructure = thisMap;
        break;
      }
    }
  }
  this.init();
}

function AuthHandler() {
  var theHandler = this;
  this.userName = '';
  this.userPass = '';
  this.checkLocalStorage = function() {
    try {
      return 'localStorage' in window && window['localStorage'] !== null;
    } catch (e) {
      return false;
    }
  }
  this.doesLocalStorage = this.checkLocalStorage();
  this.init = function() {
    var doSet = true;
    if(theHandler.doesLocalStorage) {
      if(localStorage['userName'] && localStorage['userPass']) {
        theHandler.userName = localStorage['userName'];
        theHandler.userPass = localStorage['userPass'];
        doSet = !(confirm("Existing credentials ("+theHandler.userName+"/"+theHandler.userPass+") detected.  Use these?"));
      }
    }
    if(doSet) {
      this.getCredentials();
    }
  }
  this.getCredentials = function() {
    theHandler.userName = prompt("Username:",theHandler.userName);
    theHandler.userPass = prompt("Password:",theHandler.userPass);
    this.setCredentials();
  }
  this.setCredentials = function() {
    if(theHandler.doesLocalStorage) {
      localStorage['userName'] = theHandler.userName;
      localStorage['userPass'] = theHandler.userPass;
    }
  }
  this.init();
}